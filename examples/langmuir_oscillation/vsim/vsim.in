###############################################
###
### This file is generated by txpp. Do not edit.
###
### Input file : /home/luke/julia/ElectrostaticTest/src/vsim/vsim.pre
### Output file: /home/luke/julia/ElectrostaticTest/src/vsim/vsim.in
### Translation: Sat, 25 Jul 2020 16:30:57
###
###############################################

nsteps = 10000
dumpPeriodicity = 100
dt = 1e-10
dimension = 1
floattype = double
verbosity = 1023
copyHistoryAtEachDump = 0
useGridBndryRestore = True
constructUniverse = False

<Grid globalGrid>
  verbosity = 1023
  numCells = [32  11  12]
  lengths = [1.0 0.1 1.0]
  startPositions = [0.0 0.0 0.0]
  maxCellXings = 1
</Grid>

<Decomp decomp>
  periodicDirs = [0  1  2]
</Decomp>

<MultiField esMultiField>

  <Field E>
    numComponents = 3
    offset = edge
    kind = regular
    overlap = [1 1]
    labels = [E_x   E_y   E_z]
  </Field>

  <Field nodalE>
    numComponents = 3
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [nodalE_x   nodalE_y   nodalE_z]
  </Field>

  <Field nodalB>
    numComponents = 3
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [nodalB_x   nodalB_y   nodalB_z]
  </Field>

  <Field Phi>
    numComponents = 1
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [Phi]
  </Field>

  <Field ChargeDensity>
    numComponents = 1
    offset = none
    kind = depField
    overlap = [1 2]
    labels = [ChargeDensity]
  </Field>

  <FieldUpdater backgroundChargeDensity0>
    kind = STFuncUpdater
    operation = add
    lowerBounds = [0  0  0]
    upperBounds = [33  12  13]
    writeFields = [ChargeDensity]
    component = 0
    cellsToUpdateAboveDomain = [True  True  True]

    <STFunc f>
      kind = expression
      expression = 0.0005126965186560001
    </STFunc>

  </FieldUpdater>

  <FieldUpdater gradPhi>
    kind = gradVecUpdater
    factor = -1.0
    lowerBounds = [0  0  0]
    upperBounds = [32   11   12]
    readFields = [Phi]
    writeFields = [E]
  </FieldUpdater>

  <FieldUpdater edgeToNode>
    kind = edgeToNodeVec
    lowerBounds = [0  0  0]
    upperBounds = [33  12  13]
    readFields = [E]
    writeFields = [nodalE]
  </FieldUpdater>

  <InitialUpdateStep backgroundChargeDensity0InitStep>
    alsoAfterRestore = True
    updaters = [backgroundChargeDensity0]
    messageFields = []
  </InitialUpdateStep>

  <InitialUpdateStep esSolveInitialUpdateStep>
    alsoAfterRestore = False
    updaters = [esSolve]
    messageFields = [Phi]
  </InitialUpdateStep>

  <InitialUpdateStep edgeToNodeInitStep>
    alsoAfterRestore = False
    updaters = [edgeToNode]
    messageFields = [nodalE]
  </InitialUpdateStep>

  <InitialUpdateStep gradPhiInitStep>
    alsoAfterRestore = False
    updaters = [gradPhi]
    messageFields = [E]
  </InitialUpdateStep>

  <UpdateStep backgroundChargeDensity0Step>
    toDtFrac = 1.0
    updaters = [backgroundChargeDensity0]
    messageFields = []
  </UpdateStep>

  <UpdateStep esSolveStep>
    toDtFrac = 1.0
    updaters = [esSolve]
    messageFields = [Phi]
  </UpdateStep>

  <UpdateStep gradPhiStep>
    toDtFrac = 1.0
    updaters = [gradPhi]
    messageFields = [E]
  </UpdateStep>

  <UpdateStep edgeToNodeStep>
    toDtFrac = 1.0
    updaters = [edgeToNode]
    messageFields = [nodalE]
  </UpdateStep>

  <FieldUpdater esSolve>
    kind = linearSolveUpdater
    lowerBounds = [0]
    upperBounds = [32]
    readFields = [ChargeDensity]
    readComponents = [0]
    writeFields = [Phi]
    writeComponents = [0]
    writeEquationToFile = 1

    <MatrixFiller interiorFiller>
      kind = stFuncStencilFiller
      verbosity = 1023
      minDim = 1
      lowerBounds = [0  0  0]
      upperBounds = [32   11   12]
      component = 0

      <STFunc coeff>
        kind = expression
        expression = -8.854187817591624e-12
      </STFunc>

      <STFuncStencilElement phi_dxp>
        value = -1024.0
        minDim = 1
        cellOffset = [0 0 0]
        functionOffset = [0.5 0. 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_dxm>
        value = -1024.0
        minDim = 1
        cellOffset = [0 0 0]
        functionOffset = [-0.5 0. 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_dyp>
        value = -12099.999999999996
        minDim = 2
        cellOffset = [0 0 0]
        functionOffset = [0. 0.5 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_dym>
        value = -12099.999999999996
        minDim = 2
        cellOffset = [0 0 0]
        functionOffset = [0. -0.5 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_dzp>
        value = -144.0
        minDim = 3
        cellOffset = [0 0 0]
        functionOffset = [0. 0. 0.5]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_dzm>
        value = -144.0
        minDim = 3
        cellOffset = [0 0 0]
        functionOffset = [0. 0. -0.5]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_npx>
        value = 1024.0
        minDim = 1
        cellOffset = [1 0 0]
        functionOffset = [0.5 0. 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_nmx>
        value = 1024.0
        minDim = 1
        cellOffset = [-1 0 0]
        functionOffset = [-0.5 0. 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_npy>
        value = 12099.999999999996
        minDim = 2
        cellOffset = [0 1 0]
        functionOffset = [0. 0.5 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_nmy>
        value = 12099.999999999996
        minDim = 2
        cellOffset = [0 -1 0]
        functionOffset = [0. -0.5 0.]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_npz>
        value = 144.0
        minDim = 3
        cellOffset = [0 0 1]
        functionOffset = [0. 0. 0.5]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

      <STFuncStencilElement phi_nmz>
        value = 144.0
        minDim = 3
        cellOffset = [0 0 -1]
        functionOffset = [0. 0. -0.5]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </STFuncStencilElement>

    </MatrixFiller>

    <VectorWriter interiorWriter>
      kind = fieldVectorWriter
      verbosity = 1023
      minDim = 1
      readField = ChargeDensity
      readComponent = 0
      lowerBounds = [0  0  0]
      upperBounds = [32   11   12]
      component = 0
    </VectorWriter>

    <VectorReader phiReader>
      kind = fieldVectorReader
      minDim = 0
      writeField = Phi
      writeComponent = 0
      lowerBounds = [0]
      upperBounds = [33]
      componentBounds = [0 1]
    </VectorReader>

    <LinearSolver linearSolver>
      kind = iterativeSolver
      verbosity = 1023
      maxIterations = 200
      tolerance = 1e-08
      convergenceMetric = r0

      <BaseSolver myBS>
        kind = gmres
        kspace = 30
        orthog = classic
      </BaseSolver>

      <Preconditioner precond>
        kind = none
      </Preconditioner>

    </LinearSolver>

  </FieldUpdater>

  updateStepOrder = [backgroundChargeDensity0Step esSolveStep gradPhiStep edgeToNodeStep]
</MultiField>

<ScalarDepositor ChargeDensityDep>
  kind = areaWeighting
  depField = esMultiField.ChargeDensity
</ScalarDepositor>

<Species electrons>
  kind = nonRelBoris
  charge = -1.6021766208e-19
  mass = 9.10938215e-31
  maxcellxing = 1
  nominalDensity = 0.0
  numPtclsInMacro = 10000000000000.0
  fields = [esMultiField.nodalE esMultiField.nodalB]
  chargeDeps = [ChargeDensityDep]

  <ParticleSource fileParticleLoader0>
    kind = fileDensSrc
    file = ../particles.dat
    shiftPtclPosition = [0.0  0.0  0.0]

    <STFunc macroDensFunc>
      kind = expression
      expression = 1.0
    </STFunc>

  </ParticleSource>

</Species>

<History electronEnergy>
  kind = speciesEnergy
  species = [electrons]
</History>

<History electricFieldEnergy>
  kind = fieldEnergy
  singleField = elecField
  fields = [esMultiField.nodalE]
</History>


